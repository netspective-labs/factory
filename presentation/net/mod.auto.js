function inspectUrlHttpHeaders(options = {
    inspectURL: null,
    onHeaders: null,
    onHeader: null
}) {
    function parseHttpHeaders(httpHeaders) {
        return httpHeaders.split("\r\n").map((x)=>x.split(/: */, 2)).filter((x)=>x[0]).reduce((ac, x)=>{
            const headerNameAsIs = x[0];
            const headerNameCamelCase = headerNameAsIs.toLowerCase().replace(/([-_][a-z])/g, (group)=>group.toUpperCase().replace('-', '').replace('_', ''));
            const headerValueAsIs = x[1];
            let headerValue = undefined;
            try {
                headerValue = JSON.parse(headerValueAsIs);
            } catch  {
                headerValue = headerValueAsIs;
            }
            ac[headerNameAsIs] = headerValue;
            ac[headerNameCamelCase] = headerValue;
            ac.__headerNameAliases[headerNameCamelCase] = headerNameAsIs;
            ac.__headerNameAliases[headerNameAsIs] = headerNameCamelCase;
            return ac;
        }, {
            __headerNameAliases: {}
        });
    }
    const inspectURL = options?.inspectURL || location;
    const xhr = new XMLHttpRequest();
    xhr.open("HEAD", inspectURL);
    xhr.onload = function() {
        const headers = parseHttpHeaders(xhr.getAllResponseHeaders());
        if (options?.onHeaders && typeof options.onHeaders === "function") options.onHeaders(headers, inspectURL);
        if (options?.onHeader) {
            if (typeof options.onHeader !== "object") {
                console.error(`[inspectUrlHttpHeaders] options.onHeader is expected to be an object`);
                return;
            }
            for(const key in options.onHeader){
                const alias = headers.__headerNameAliases[key];
                const handlers = options.onHeader[key];
                const foundHeaderFn = Array.isArray(handlers) ? handlers[0] : handlers;
                const notFoundHeaderFn = Array.isArray(handlers) ? handlers[1] : undefined;
                if (!(key in headers)) {
                    if (typeof notFoundHeaderFn === "function") {
                        notFoundHeaderFn(key, alias, inspectURL);
                    } else if (notFoundHeaderFn) {
                        console.error(`[inspectUrlHttpHeaders] onHeader "${key}" notFoundHeaderFn is not a function`);
                    }
                } else {
                    const value = headers[key];
                    if (typeof foundHeaderFn === "function") {
                        foundHeaderFn(value, key, alias, inspectURL);
                    } else {
                        console.error(`[inspectUrlHttpHeaders] onHeader "${key}" foundHeaderFn is not a function`);
                    }
                }
            }
        }
    };
    xhr.send();
}
export { inspectUrlHttpHeaders as inspectUrlHttpHeaders };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZpbGU6Ly8vaG9tZS9zbnNoYWgvd29ya3NwYWNlcy9naXRodWIuY29tL3Jlc0ZhY3RvcnkvZmFjdG9yeS9saWIvcHJlc2VudGF0aW9uL25ldC9pbnNwZWN0LWh0dHAtaGVhZGVycy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUT0RPOiBjb252ZXJ0IHRvIFR5cGVzY3JpcHQgdXNpbmcgZmV0Y2hcblxuLyoqXG4gKiBXZWIgYnJvd3NlciBwYWdlcyBkbyBub3QgaGF2ZSBhY2Nlc3MgdG8gdGhlaXIgb3duIEhUVFAgaGVhZGVycy4gVGhpcyBmdW5jdGlvblxuICogYWxsb3dzIGEgdGlueSBIRUFEIGJhc2VkIG5ldHdvcmsgY2FsbCB0byBiZSBtYWRlIHRvIGFjcXVpcmUgSFRUUCBoZWFkZXJzIGZvclxuICogYW55IFVSTCBidXQgZGVmYXVsdHMgdG8gdGhlIGN1cnJlbnQgbG9jYXRpb247IG9uY2UgdGhlIGhlYWRlcnMgYXJlIGFjcXVpcmVkLFxuICogY29udmVuaWVudCBmdW5jdGlvbmFsIGhhbmRsaW5nIG9mIHRoZSBlbnRpcmUgb2JqZWN0IG9yIGhhbmRsaW5nIG9mIHNwZWNpZmljXG4gKiBoZWFkZXIgcHJvcGVydGllcyBpcyBhdmFpbGFibGUuXG4gKiBAcGFyYW0geyp9IG9wdGlvbnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluc3BlY3RVcmxIdHRwSGVhZGVycyhvcHRpb25zID0ge1xuICAgIGluc3BlY3RVUkw6IG51bGwsIC8vIGRlZmF1bHQgaXMgY3VycmVudCBwYWdlL2xvY2F0aW9uXG4gICAgb25IZWFkZXJzOiBudWxsLCAgLy8gKGhlYWRlcnMsIHVybCkgPT4gdm9pZCxcbiAgICBvbkhlYWRlcjogbnVsbCwgICAvLyB7IFwiaGVhZGVyXCI6ICh2YWx1ZSwga2V5LCBhbGlhcywgdXJsKSA9PiB2b2lkLCBcImhlYWRlcjJcIjogW2ZvdW5kOiAodmFsdWUsIGtleSwgYWxpYXMsIHVybCkgPT4gdm9pZCwgbm90Rm91bmQ6IChrZXksIGFsaWFzLCB1cmwpID0+IHZvaWRdIH1cbn0pIHtcbiAgICBmdW5jdGlvbiBwYXJzZUh0dHBIZWFkZXJzKGh0dHBIZWFkZXJzKSB7XG4gICAgICAgIHJldHVybiBodHRwSGVhZGVycy5zcGxpdChcIlxcclxcblwiKVxuICAgICAgICAgICAgLm1hcCh4ID0+IHguc3BsaXQoLzogKi8sIDIpKVxuICAgICAgICAgICAgLmZpbHRlcih4ID0+IHhbMF0pXG4gICAgICAgICAgICAucmVkdWNlKChhYywgeCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlck5hbWVBc0lzID0geFswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJOYW1lQ2FtZWxDYXNlID0gaGVhZGVyTmFtZUFzSXMudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC8oWy1fXVthLXpdKS9nLCBncm91cCA9PlxuICAgICAgICAgICAgICAgICAgICBncm91cC50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgnLScsICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJ18nLCAnJylcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlclZhbHVlQXNJcyA9IHhbMV07XG4gICAgICAgICAgICAgICAgbGV0IGhlYWRlclZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGhlYWRlclZhbHVlID0gSlNPTi5wYXJzZShoZWFkZXJWYWx1ZUFzSXMpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXJWYWx1ZSA9IGhlYWRlclZhbHVlQXNJcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWNbaGVhZGVyTmFtZUFzSXNdID0gaGVhZGVyVmFsdWU7XG4gICAgICAgICAgICAgICAgYWNbaGVhZGVyTmFtZUNhbWVsQ2FzZV0gPSBoZWFkZXJWYWx1ZTtcbiAgICAgICAgICAgICAgICBhYy5fX2hlYWRlck5hbWVBbGlhc2VzW2hlYWRlck5hbWVDYW1lbENhc2VdID0gaGVhZGVyTmFtZUFzSXM7XG4gICAgICAgICAgICAgICAgYWMuX19oZWFkZXJOYW1lQWxpYXNlc1toZWFkZXJOYW1lQXNJc10gPSBoZWFkZXJOYW1lQ2FtZWxDYXNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBhYztcbiAgICAgICAgICAgIH0sIHsgX19oZWFkZXJOYW1lQWxpYXNlczoge30gfSk7XG4gICAgfVxuXG4gICAgY29uc3QgaW5zcGVjdFVSTCA9IG9wdGlvbnM/Lmluc3BlY3RVUkwgfHwgbG9jYXRpb247XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oXCJIRUFEXCIsIGluc3BlY3RVUkwpO1xuICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBwYXJzZUh0dHBIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7XG4gICAgICAgIGlmIChvcHRpb25zPy5vbkhlYWRlcnMgJiYgdHlwZW9mIG9wdGlvbnMub25IZWFkZXJzID09PSBcImZ1bmN0aW9uXCIpIG9wdGlvbnMub25IZWFkZXJzKGhlYWRlcnMsIGluc3BlY3RVUkwpO1xuICAgICAgICBpZiAob3B0aW9ucz8ub25IZWFkZXIpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5vbkhlYWRlciAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtpbnNwZWN0VXJsSHR0cEhlYWRlcnNdIG9wdGlvbnMub25IZWFkZXIgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gb2JqZWN0YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gb3B0aW9ucy5vbkhlYWRlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFsaWFzID0gaGVhZGVycy5fX2hlYWRlck5hbWVBbGlhc2VzW2tleV07XG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlcnMgPSBvcHRpb25zLm9uSGVhZGVyW2tleV07XG4gICAgICAgICAgICAgICAgY29uc3QgZm91bmRIZWFkZXJGbiA9IEFycmF5LmlzQXJyYXkoaGFuZGxlcnMpID8gaGFuZGxlcnNbMF0gOiBoYW5kbGVycztcbiAgICAgICAgICAgICAgICBjb25zdCBub3RGb3VuZEhlYWRlckZuID0gQXJyYXkuaXNBcnJheShoYW5kbGVycykgPyBoYW5kbGVyc1sxXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gaGVhZGVycykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBub3RGb3VuZEhlYWRlckZuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdEZvdW5kSGVhZGVyRm4oa2V5LCBhbGlhcywgaW5zcGVjdFVSTCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm90Rm91bmRIZWFkZXJGbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW2luc3BlY3RVcmxIdHRwSGVhZGVyc10gb25IZWFkZXIgXCIke2tleX1cIiBub3RGb3VuZEhlYWRlckZuIGlzIG5vdCBhIGZ1bmN0aW9uYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGhlYWRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmb3VuZEhlYWRlckZuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kSGVhZGVyRm4odmFsdWUsIGtleSwgYWxpYXMsIGluc3BlY3RVUkwpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW2luc3BlY3RVcmxIdHRwSGVhZGVyc10gb25IZWFkZXIgXCIke2tleX1cIiBmb3VuZEhlYWRlckZuIGlzIG5vdCBhIGZ1bmN0aW9uYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgeGhyLnNlbmQoKTtcbn1cbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFVTyxTQUFTLHFCQUFxQixDQUFDLE9BQU8sR0FBRztJQUM1QyxVQUFVLEVBQUUsSUFBSTtJQUNoQixTQUFTLEVBQUUsSUFBSTtJQUNmLFFBQVEsRUFBRSxJQUFJO0NBQ2pCLEVBQUU7SUFDQyxTQUFTLGdCQUFnQixDQUFDLFdBQVcsRUFBRTtRQUNuQyxPQUFPLFdBQVcsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQzNCLEdBQUcsQ0FBQyxDQUFBLENBQUMsR0FBSSxDQUFDLENBQUMsS0FBSyxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQzNCLE1BQU0sQ0FBQyxDQUFBLENBQUMsR0FBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDakIsTUFBTSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsR0FBSztZQUNmLE1BQU0sY0FBYyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQUFBQztZQUM1QixNQUFNLG1CQUFtQixHQUFHLGNBQWMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxPQUFPLGlCQUFpQixDQUFBLEtBQUssR0FDbEYsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUNkLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQ2hCLE9BQU8sQ0FBQyxHQUFHLEVBQUUsRUFBRSxDQUFDLENBQ3hCLEFBQUM7WUFDRixNQUFNLGVBQWUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEFBQUM7WUFDN0IsSUFBSSxXQUFXLEdBQUcsU0FBUyxBQUFDO1lBQzVC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
